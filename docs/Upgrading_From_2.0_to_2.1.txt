Upgrading Repast Simphony from 2.0 to 2.1

To upgrade your models from 2.0 to 2.1, open the workspace in 2.1 or
create a new workspace and import your existing models into that workspace. If
you do the former, you will most likely run into the
UnsupportedClassVersionError issue mentioned below. See that for the resolution.

Repast Simphony 2.1 requires Java 1.7. Java 1.7 is included with the
windows distribution. For OSX and Linux, Java 1.7 can be downloaded from:

http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html


Potential Problems

-- UnsupportedClassVersionError

Q. I imported a 2.0 workspace into 2.1 and now I get:

java.lang.UnsupportedClassVersionError: repast/simphony/runtime/RepastMain :
Unsupported major.minor version 51.0

A. Repast Simphony 2.1 requires Java 1.7 (aka Java 7). Workspaces that
previously worked with Simphony will be setup to use Java 1.6. The workspace
preferences must be updated to use Java 1.7. To do that go to the Preferences
menu then Java / Installed JREs and choose a Java 7 jre.

-- JUnit Issues

Q. My 2.0 based project includes JUnit unit tests but the tests won't compile
(e.g. the imported packages won't import etc.).

A. The new Eclipse (named Kepler) included with Repast Simphony changed the
name of its JUnit library plugin. The project build path needs to be updated
to this new JUnit library. To do this, right click on the project name
in the package explorer then Build Path -> Add Libraries. Choose JUnit
from the list, then Next, then Finish. That will add Eclipse's current JUnit
to the project.

-- Vecmath / Jogl/ Java3D Exceptions

Q. When I run my model, I get vecmath / jogl/ java3d related exceptions
-- for example:

Exception in thread "Thread-5" java.lang.NoSuchMethodError:
javax.vecmath.Point3f.setY(F)V

A. Under OSX, Apple has installed older obsolete versions of vecmath and
Java3D. These may be located in a variety of locations.

/System/Library/Java/Extensions
/Library/Java/Extensions

or

<User Home>/Library/Java/Extensions

Remove all the vecmath, java3d and jogl related jars and vecmath, java3d,
jogl jnilib files from those directories.

-- Statechart code is not found

Q. I imported an existing 2.0 project into 2.1 and created a statechart. The
statechart code in my agent won't compile.

A. By default a 2.0 project is not set up to generate and compile code from
a statechart. To enable this, the project must be upgraded to Simphony 2.1.
To do that, right click on the project name, then choose Repast Simphony
from the menu and then Update Repast Simphony Nature. Now when you save the
statechart you should see a src-gen directory in into which the statechart
code is generated.

-- NullPointer exception when using the new Batch Run GUI

Q. I clicked on the batch run gui button or ran the stand alone batch runner, and 
I get:

Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at repast.simphony.batch.gui.BatchConfigMediator.<init>(BatchConfigMediator.java:80)
at repast.simphony.batch.gui.BatchConfigMediator.<init>(BatchConfigMediator.java:72)
at repast.simphony.batch.gui.MainPanel.<init>(MainPanel.java:27)
...

A. The MessageCenter.log4j.properties file is out of date and needs to be updated. 
Replace the current contents of that file with:

log4j.rootLogger = error

log4j.logger.org.java.plugin = warn, stdout
log4j.logger.org.apache.commons= warn, stdout
log4j.logger.repast.simphony.plugin = warn, stdout

log4j.logger.MessageCenter.INTERNAL.repast = info, stdout, R
log4j.logger.MessageCenter.INTERNAL.saf = info, stdout, R

log4j.logger.repast.simphony.batch = info, stdout, R
log4j.logger.repast.simphony.batch.ssh.SSHSessionFactory = warn, stdout, R

log4j.appender.stdout = org.apache.log4j.ConsoleAppender 
log4j.appender.stdout.layout = simphony.util.messages.MessageCenterLayout 
log4j.appender.stdout.layout.conversionPattern =%-5p [%t] %d{HH:mm:ss,SSS} %c - %m%n
#log4j.appender.stdout.Threshold=debug 

log4j.appender.R=org.apache.log4j.RollingFileAppender 
log4j.appender.R.File=debug.log 
log4j.appender.R.MaxFileSize=100KB 
log4j.appender.R.MaxBackupIndex=1 
#log4j.appender.R.Threshold=info 
log4j.appender.R.layout=simphony.util.messages.MessageCenterLayout
log4j.appender.R.layout.ConversionPattern=%-5p [%t] %d{ISO8601} %c - %m%n