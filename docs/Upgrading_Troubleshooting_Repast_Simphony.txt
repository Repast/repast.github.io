Upgrading / Troubleshooting Repast Simphony

This document contains FAQ entries and instructions for upgrading and
troubleshooting Repast Simphony



Potential Problems

-- UnsupportedClassVersionError

Q. I imported a previous workspace into a new version and now I get some
version of:

java.lang.UnsupportedClassVersionError: repast/simphony/runtime/RepastMain :
Unsupported major.minor version 51.0

A. Repast Simphony 2.4.0 requires Java 1.8. Java 1.8 can be downloaded from:

http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html

A. Repast Simphony 2.1/2.2,2.3 requires Java 1.7 (aka Java 7). Workspaces that
previously worked with Simphony will be setup to use Java 1.6. The workspace
preferences must be updated to use Java 1.7. To do that go to the Preferences
menu then Java / Installed JREs and choose a Java 7 jre.

-- Launcher Issues

Q. I tried the batch model launcher in eciplse and I get class not found
errors for the apache CLI classes.

A. Current version of the batch GUI require a different classpath and
older versions of the .launch file do not have the correct classpath. To
fix this, open the .launch file as text and replace the line:

<listEntry value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;
standalone=&quot;no&quot;?&gt;&#10;&lt;runtimeClasspathEntry
containerPath=&quot;STAND_ALONE_BATCH_CLASSPATH&quot;
path=&quot;3&quot; type=&quot;3&quot;/&gt;&#10;"/>

with:

<listEntry value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;
standalone=&quot;no&quot;?&gt;&#10;&lt;runtimeClasspathEntry
containerPath=&quot;STAND_ALONE_BATCH_LAUNCHER&quot;
path=&quot;3&quot; type=&quot;4&quot;/&gt;&#10;"/>

-- Build Installer Issues

Q. I have a 2.0 / 2.1 project and I try to build an installer for it using 2.2. I get
an error like:

 [java]    ./.temp/JZombies_Demo/installation_components_temp.xml:127:
 /Applications/Repast Simphony 2.2/eclipse/plugins/repast.simphony.grass_2.2.0
     [java] com.izforge.izpack.compiler.CompilerException: .
     /.temp/JZombies_Demo/installation_components_temp.xml:127:
     /Applications/Repast Simphony 2.2/eclipse/plugins/repast.simphony.grass_2.2.0

Note that the error may also refer to the repast.simphony.[ireport | matlab |
terracotta | visad] plugins.

A. These plugins do not exist in 2.2 and thus a 2.0 / 2.1 installer fails. To fix
it, delete the relevant line(s) in your projects installer/installation_components.xml
file. The line number will be specified in the error. For example, line 127 refers
to the non-existent grass plugin:

<file src="$EclipsePluginsDirectory/repast.simphony.grass_$REPAST_VERSION"
	targetdir="$INSTALL_PATH/repast.simphony"/>

So, it should be deleted.

-- JUnit Issues

Q. My 2.0 based project includes JUnit unit tests but the tests won't compile
(e.g. the imported packages won't import etc.).

A. The new Eclipse (named Kepler) included with Repast Simphony changed the
name of its JUnit library plugin. The project build path needs to be updated
to this new JUnit library. To do this, right click on the project name
in the package explorer then Build Path -> Add Libraries. Choose JUnit
from the list, then Next, then Finish. That will add Eclipse's current JUnit
to the project.

-- Vecmath / Jogl/ Java3D Exceptions

Q. When I run my model, I get vecmath / jogl/ java3d related exceptions
-- for example:

Exception in thread "Thread-5" java.lang.NoSuchMethodError:
javax.vecmath.Point3f.setY(F)V

A. Under OSX, Apple has installed older obsolete versions of vecmath and
Java3D. These may be located in a variety of locations.

/System/Library/Java/Extensions
/Library/Java/Extensions

or

<User Home>/Library/Java/Extensions

Remove all the vecmath, java3d and jogl related jars and vecmath, java3d,
jogl jnilib files from those directories.

Q. When I run my model the 3D display is blank.

A. If you are using OSX with an Nvidia GPU, add the following as a JVM
argument to your launcher via the Run Configuration menu.

 -Dj3d.transparentOffScreen=true

-- Statechart code is not found

Q. I imported an existing 2.0 project into 2.1 / 2.2 and created a statechart. The
statechart code in my agent won't compile.

A. By default a 2.0 project is not set up to generate and compile code from
a statechart. To enable this, the project must be upgraded to Simphony 2.1.
To do that, right click on the project name, then choose Repast Simphony
from the menu and then Update Repast Simphony Nature. Now when you save the
statechart you should see a src-gen directory in into which the statechart
code is generated.

-- NullPointer exception when using the new Batch Run GUI

Q. I clicked on the batch run gui button or ran the stand alone batch runner, and
I get:

Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at repast.simphony.batch.gui.BatchConfigMediator.<init>(BatchConfigMediator.java:80)
at repast.simphony.batch.gui.BatchConfigMediator.<init>(BatchConfigMediator.java:72)
at repast.simphony.batch.gui.MainPanel.<init>(MainPanel.java:27)
...

A. The MessageCenter.log4j.properties file is out of date and needs to be updated.
Replace the current contents of that file with:

log4j.rootLogger = error

log4j.logger.org.java.plugin = warn, stdout
log4j.logger.org.apache.commons= warn, stdout
log4j.logger.repast.simphony.plugin = warn, stdout

log4j.logger.MessageCenter.INTERNAL.repast = info, stdout, R
log4j.logger.MessageCenter.INTERNAL.saf = info, stdout, R

log4j.logger.repast.simphony.batch = info, stdout, R
log4j.logger.repast.simphony.batch.ssh.SSHSessionFactory = warn, stdout, R

log4j.appender.stdout = org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout = simphony.util.messages.MessageCenterLayout
log4j.appender.stdout.layout.conversionPattern =%-5p [%t] %d{HH:mm:ss,SSS} %c - %m%n
#log4j.appender.stdout.Threshold=debug

log4j.appender.R=org.apache.log4j.RollingFileAppender
log4j.appender.R.File=debug.log
log4j.appender.R.MaxFileSize=100KB
log4j.appender.R.MaxBackupIndex=1
#log4j.appender.R.Threshold=info
log4j.appender.R.layout=simphony.util.messages.MessageCenterLayout
log4j.appender.R.layout.ConversionPattern=%-5p [%t] %d{ISO8601} %c - %m%n
